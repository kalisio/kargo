(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{178:function(t,e,s){"use strict";s.r(e);var n=s(0),r=Object(n.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("p",[t._v("In a critical operational context, it can be safer to rely on "),s("a",{attrs:{href:"https://www.mongodb.com/cloud/atlas",target:"_blank",rel:"noopener noreferrer"}},[t._v("MongoDB Atlas"),s("OutboundLink")],1),t._v(" than on your own instance of MongoDB.")]),t._v(" "),t._m(1),t._v(" "),s("ol",[t._m(2),t._v(" "),s("li",[s("p",[t._v("Enables the connection from "),s("strong",[t._v("Kargo")]),t._v(" to your cluster. On "),s("strong",[t._v("AWS")]),t._v(" the best practice is to enable a peering connection between your "),s("strong",[t._v("Kargo")]),t._v(" VPC and your cluster VPC. See the "),s("a",{attrs:{href:"https://docs.atlas.mongodb.com/security-vpc-peering/",target:"_blank",rel:"noopener noreferrer"}},[t._v("documentation"),s("OutboundLink")],1),t._v(" for the detail procedure.")])]),t._v(" "),t._m(3)]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"using-mongodb-atlas"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#using-mongodb-atlas","aria-hidden":"true"}},[this._v("#")]),this._v(" Using MongoDB Atlas")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("To use "),e("strong",[this._v("MongoDB Atlas")]),this._v(" with "),e("strong",[this._v("Kargo")]),this._v(", there are few things to do:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("p",[this._v("Create your cluster on "),e("strong",[this._v("MongoDB Atlas")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("p",[this._v("Configure the services in "),e("strong",[this._v("Kargo")]),this._v(" to use "),e("strong",[this._v("MongoDB Atlas")]),this._v(".")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The tricky thing is that you will need to configure the services with the appropriate connection string. Indeed, the connection string provided by "),e("strong",[this._v("MongoDB Atlas")]),this._v(" is dependent from the MongoDB driver you use and for now "),e("strong",[this._v("Krawler")]),this._v(" based jobs are using the version 3 of the MongoDB driver while "),e("strong",[this._v("KDK")]),this._v(" based applications are using the version 2.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("In your "),e("code",[this._v(".env")]),this._v(" file:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("declare the following variables, with the connections strings provided by MongoDB Atlas:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("MONGO_ATLAS_URL_V2"),e("span",{pre:!0,attrs:{class:"token operator"}},[this._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[this._v('"mongodb://<user>:<password>@<cluster-name>-shard-00-00-<cluster-path>.mongodb.net:27017,<cluster-name>-shard-00-01-<cluster-path>.mongodb.net:27017,<cluster-name>-shard-00-02-<cluster-path>.mongodb.net:27017/kargo?ssl=true&replicaSet=Cluster0-shard-0&authSource=admin&retryWrites=true"')]),this._v("\nMONGO_ATLAS_URL_V3"),e("span",{pre:!0,attrs:{class:"token operator"}},[this._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[this._v('"mongodb+srv://<user>:<password>@<cluster-name>-<cluster-path>.mongodb.net/kargo&retryWrites=true"')]),this._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),e("p",[this._v("To get the connection strings, click on the "),e("code",[this._v("CONNECT")]),this._v(" button attached to your cluster. Then select "),e("code",[this._v("Connect your application")]),this._v(" and a window will display the connection strings for the different version of the driver.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),e("p",[this._v("Do not forget to quote the variables.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("update the DB URL variables for the services, for instance:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nKANO_DB_URL"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$MONGO_ATLAS_URL_V2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nVIGICRUES_DB_URL"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$MONGO_ATLAS_URL_V3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nWEACAST_DB_URL"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$MONGO_ATLAS_URL_V2")]),t._v("\nWEACAST_LOADERS_DB_URL"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$MONGO_ATLAS_URL_V3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])])}],!1,null,null,null);r.options.__file="using-mongodb-atlas.md";e.default=r.exports}}]);