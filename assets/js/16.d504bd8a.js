(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{178:function(t,e,s){"use strict";s.r(e);var a=s(0),r=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("p",[t._v("The "),s("a",{attrs:{href:"https://github.com/kalisio/kargo-toolbox",target:"_blank",rel:"noopener noreferrer"}},[t._v("kargo-toolbox"),s("OutboundLink")],1),t._v(" is a docker image shipping a set of tools to help processing geospatial data. Precisely it comes with:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.gdal.org/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("GDAL"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.imagemagick.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ImageMagick"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/icetan/sqlitepipe",target:"_blank",rel:"noopener noreferrer"}},[t._v("sqlitepipe"),s("OutboundLink")],1)])]),t._v(" "),t._m(1),t._v(" "),s("p",[t._v("Simply run the following command on a given worker node:")]),t._v(" "),t._m(2),t._m(3),t._v(" "),t._m(4),t._m(5),t._v(" "),t._m(6),t._v(" "),s("p",[t._v("The "),s("strong",[t._v("kargo-toolbox")]),t._v(" project comes with the "),s("a",{attrs:{href:"https://github.com/icetan/sqlitepipe",target:"_blank",rel:"noopener noreferrer"}},[t._v("sqlitepipe"),s("OutboundLink")],1),t._v(" utility that can be used for this purpose. The following example shows how to use "),s("strong",[t._v("sqlitepipe")]),t._v(" and "),s("a",{attrs:{href:"https://www.imagemagick.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ImageMagick"),s("OutboundLink")],1),t._v(" to make white pixels transparent on all of the tiles stored within the MBTiles file.")]),t._v(" "),t._m(7),t._m(8)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"using-the-kargo-toolbox"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#using-the-kargo-toolbox","aria-hidden":"true"}},[this._v("#")]),this._v(" Using the Kargo toolbox")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"basic-usage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#basic-usage","aria-hidden":"true"}},[this._v("#")]),this._v(" Basic usage")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token variable"}},[this._v("$docker")]),this._v(" run  -v /path/to/your/data:/data -t -i kalisio/kargo-toolbox:latest /bin/bash\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[this._v("$cd")]),this._v(" data\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[this._v("$gdalinfo")]),this._v(" path/to/my/dataset\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If you need to access another container you will need to run the GDAL container within the same network. For instance, the following command will allow you to link the GDAL container to an existing "),e("code",[this._v("Postgis")]),this._v(" container in the network "),e("code",[this._v("kargo")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token variable"}},[this._v("$docker")]),this._v(" run --network"),e("span",{pre:!0,attrs:{class:"token operator"}},[this._v("=")]),this._v("kargo  -v /mnt/data:/data -t -i kalisio/kargo-toolbox:latest /bin/bash\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"use-cases"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#use-cases","aria-hidden":"true"}},[this._v("#")]),this._v(" Use cases")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"how-to-post-process-an-mbtiles-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-post-process-an-mbtiles-file","aria-hidden":"true"}},[this._v("#")]),this._v(" How to post process an MBTiles file ?")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("sqlite3 my-mbtiles.mbtiles\nUPDATE tiles SET tile_data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("pipe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_data, "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/usr/bin/convert'")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-transparent'")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'white'")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'png:-'")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'png:-'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nVACUUM tiles"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n.quit\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("According the size of the MBTiles to process you may encounter some memory errors and have such an output: "),s("code",[t._v("Error: database or disk is full")]),t._v("\nYou should tell "),s("strong",[t._v("sqlite")]),t._v(" to use a free disk space to work with the temp files:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("sqlite"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" pragma temp_store "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" 1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsqlite"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" pragma temp_store_directory "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/directory/with/lots/of/space'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}],!1,null,null,null);r.options.__file="using-kargo-toolbox.md";e.default=r.exports}}]);