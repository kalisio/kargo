ARG VERSION

FROM maptiler/tileserver-gl:$VERSION

# Override tileservergl port since we run as non root
# Original (v3.1.1) tileservergl docker run as node but try to open port 80
# which is probably not ok
#EXPOSE 8080
#CMD ["-p", "8080"]

USER root

RUN export DEBIAN_FRONTEND=noninteractive \
  && apt-get -qq update \
  && apt-get -y --no-install-recommends install \
      apt-transport-https \
      curl \
  && apt-get -y --purge autoremove \
  && apt-get clean \
  && rm -rf /var/lib/apt/lists/*