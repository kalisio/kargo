<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Getting started | Kargo</title>
    <meta name="description" content="A Docker based solution to deploy Geospatial Services">
    <link rel="icon" href="https://s3.eu-central-1.amazonaws.com/kalisioscope/kargo/kargo-icon-32x32.png">
  <link rel="manifest" href="/kargo/manifest.json">
    
    <link rel="preload" href="/kargo/assets/css/styles.f50569d9.css" as="style"><link rel="preload" href="/kargo/assets/js/app.f50569d9.js" as="script"><link rel="preload" href="/kargo/assets/css/styles.f50569d9.css" as="style"><link rel="preload" href="/kargo/assets/js/7.74178ac1.js" as="script"><link rel="prefetch" href="/kargo/assets/js/2.05c23c5c.js"><link rel="prefetch" href="/kargo/assets/css/1.styles.36c1a3fe.css"><link rel="prefetch" href="/kargo/assets/js/1.36c1a3fe.js"><link rel="prefetch" href="/kargo/assets/css/2.styles.05c23c5c.css"><link rel="prefetch" href="/kargo/assets/js/3.f6033dbe.js"><link rel="prefetch" href="/kargo/assets/js/4.96b5875c.js"><link rel="prefetch" href="/kargo/assets/js/5.c24ccf96.js"><link rel="prefetch" href="/kargo/assets/js/6.e0baece6.js"><link rel="prefetch" href="/kargo/assets/js/8.7630d6dd.js"><link rel="prefetch" href="/kargo/assets/js/9.c0bb6cb1.js"><link rel="prefetch" href="/kargo/assets/js/10.d07a32f4.js">
    <link rel="stylesheet" href="/kargo/assets/css/styles.f50569d9.css"><link rel="stylesheet" href="/kargo/assets/css/1.styles.36c1a3fe.css"><link rel="stylesheet" href="/kargo/assets/css/2.styles.05c23c5c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/kargo/" class="home-link router-link-active"><!----> <span class="site-name">Kargo</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/kargo/what-is-it/" class="nav-link">What is it ?</a></div><div class="nav-item"><a href="/kargo/how-does-it-work/" class="nav-link">How doest it work ?</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">How to use it ?</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kargo/how-to-use-it/getting-started.html" class="nav-link router-link-exact-active router-link-active">Getting started</a></li><li class="dropdown-item"><!----> <a href="/kargo/how-to-use-it/tips.html" class="nav-link">Tips</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">   ?</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/kalisio/kargo" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/kargo/CONTRIBUTING.html" class="nav-link">Contributing</a></li><li class="dropdown-item"><!----> <a href="/kargo/LICENSE.html" class="nav-link">License</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/kargo/what-is-it/" class="nav-link">What is it ?</a></div><div class="nav-item"><a href="/kargo/how-does-it-work/" class="nav-link">How doest it work ?</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">How to use it ?</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kargo/how-to-use-it/getting-started.html" class="nav-link router-link-exact-active router-link-active">Getting started</a></li><li class="dropdown-item"><!----> <a href="/kargo/how-to-use-it/tips.html" class="nav-link">Tips</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">   ?</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/kalisio/kargo" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/kargo/CONTRIBUTING.html" class="nav-link">Contributing</a></li><li class="dropdown-item"><!----> <a href="/kargo/LICENSE.html" class="nav-link">License</a></li></ul></div></div> <!----></nav> <p align="center"><a href="https://kalisio.com"><img src="https://s3.eu-central-1.amazonaws.com/kalisioscope/kalisio/kalisio-logo-black-256x84.png"></a> <br> <i><small>Unleashing the potential of spatial information</small></i></p> <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Getting started</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/kargo/how-to-use-it/getting-started.html#prepare-the-infrastructure" class="sidebar-link">Prepare the infrastructure</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kargo/how-to-use-it/getting-started.html#install-kargo" class="sidebar-link">Install  kargo</a></li><li class="sidebar-sub-header"><a href="/kargo/how-to-use-it/getting-started.html#provision-the-data" class="sidebar-link">Provision the data</a></li><li class="sidebar-sub-header"><a href="/kargo/how-to-use-it/getting-started.html#define-placement-constraints" class="sidebar-link">Define placement constraints</a></li></ul></li><li><a href="/kargo/how-to-use-it/getting-started.html#setup-the-services" class="sidebar-link">Setup the services</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kargo/how-to-use-it/getting-started.html#configure-the-services" class="sidebar-link">Configure the services</a></li></ul></li><li><a href="/kargo/how-to-use-it/getting-started.html#manage-the-services" class="sidebar-link">Manage the services</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kargo/how-to-use-it/getting-started.html#deploy-the-services" class="sidebar-link">Deploy the services</a></li><li class="sidebar-sub-header"><a href="/kargo/how-to-use-it/getting-started.html#stop-the-services" class="sidebar-link">Stop the services</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="getting-started"><a href="#getting-started" aria-hidden="true" class="header-anchor">#</a> Getting started</h1> <div class="warning custom-block"><p class="custom-block-title">Prerequisites</p> <p>To play with <strong>Kargo</strong> you must have an operational Docker Swarm infrastructure. If you already have these, congratulations !
If not you may have a look at <a href="https://kalisio.github.io/kaabah/" target="_blank" rel="noopener noreferrer"><strong>Kaabah</strong><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <p>Using <strong>kargo</strong> is quite easy and basically the approach to setup your Geospatial infrastructure is the following:</p> <ol><li>Prepare your infrastructure: install Kargo, provision your infrastructure with the data you want to expose, place constraints on a Swarm architecture...</li> <li>Setup your services: build and configures the services you want to deploy</li> <li>Manage the services: deploy, update and stop the services</li></ol> <h2 id="prepare-the-infrastructure"><a href="#prepare-the-infrastructure" aria-hidden="true" class="header-anchor">#</a> Prepare the infrastructure</h2> <h3 id="install-kargo"><a href="#install-kargo" aria-hidden="true" class="header-anchor">#</a> Install  kargo</h3> <ol><li>On the manager node, clone the <strong>kargo</strong> repository in the directory of your choice</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">$git</span> clone https://github.com/kalisio/kargo.git
</code></pre></div><ol start="2"><li>On the workers worker share the <code>configs</code> directory of the <strong>Kargo</strong> repository</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mkdir</span> -p /home/ubuntu/kargo/configs
sshfs ubuntu@<span class="token operator">&lt;</span>swam manager ip<span class="token operator">&gt;</span>:/home/ubuntu/kargo/configs /home/ubuntu/kargo/configs -o IdentityFile<span class="token operator">=</span>/home/ubuntu/.ssh/ssh.pem -o allow_other
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">SSHFS</p> <p>To share the <code>configs</code> directory among the workers, we rely on <strong>SSHFS</strong>. If not installed on your infrastructure, you may run the following procedure:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> sshfs
<span class="token comment"># Edit fuse conf to enable the allow_other option</span>
<span class="token function">sudo</span> <span class="token function">nano</span> /etc/fuse.conf and uncomment the line
<span class="token comment">#user_allow_other</span>
</code></pre></div></div> <h3 id="provision-the-data"><a href="#provision-the-data" aria-hidden="true" class="header-anchor">#</a> Provision the data</h3> <p>It is up to you to copy your data to the different nodes. You must have to keep in mind that these data will have to be accessible by the services that you want to deploy.</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>We can provide datasets from different sources such as public catalogs and those of our partners such as <a href="https://openmaptiles.com/" target="_blank" rel="noopener noreferrer">OpenMapTiles<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://www.planetobserver.com/" target="_blank" rel="noopener noreferrer">PlanetObserver<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Do bot hesitate to contact us !</p></div> <h3 id="define-placement-constraints"><a href="#define-placement-constraints" aria-hidden="true" class="header-anchor">#</a> Define placement constraints</h3> <p>Once you have copy the datasets to the different nodes, you need to define placement constraints on the nodes to force the deployment strategy.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">$sudo</span> docker node update --label-add postgis<span class="token operator">=</span>true <span class="token punctuation">{</span>node<span class="token punctuation">}</span>
</code></pre></div><h2 id="setup-the-services"><a href="#setup-the-services" aria-hidden="true" class="header-anchor">#</a> Setup the services</h2> <h3 id="configure-the-services"><a href="#configure-the-services" aria-hidden="true" class="header-anchor">#</a> Configure the services</h3> <ol><li><p>Make a copy of our <code>.env.sample</code> and rename it to <code>.env</code></p></li> <li><p>Update the file with your preferences:</p></li></ol> <div class="language- extra-class"><pre class="language-text"><code>#
# KARGO
#
# This is the .env file to set up your kargo environment

# The path to your datasets
DATA_PATH=/mnt/data

# Postgis configuration
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
PGDATA=/mnt/data/postgis

# Docker network to be used
NETWORK=kargo

# Virtual hosts 
# Uncomment and update the lines below if you use an nginx-proxy based solution in front of kargo
#GEOSERVER_VHOST=geoserver.your-domain.com
#MAPPROXY_VHOST=mapproxy.your-domain.com
#TILESERVERGL_VHOST=tileservergl.your-domain.com
</code></pre></div><h2 id="manage-the-services"><a href="#manage-the-services" aria-hidden="true" class="header-anchor">#</a> Manage the services</h2> <h3 id="deploy-the-services"><a href="#deploy-the-services" aria-hidden="true" class="header-anchor">#</a> Deploy the services</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$./deploy-kargo.sh
</code></pre></div><h3 id="stop-the-services"><a href="#stop-the-services" aria-hidden="true" class="header-anchor">#</a> Stop the services</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$./remove-kargo.sh
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/kargo/assets/js/7.74178ac1.js" defer></script><script src="/kargo/assets/js/app.f50569d9.js" defer></script>
  </body>
</html>
